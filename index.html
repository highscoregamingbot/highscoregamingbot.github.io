<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Telegram WebApp Test</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: #fff;
      padding: 2em;
    }
    h2 { margin-top: 0; }
    .ok { color: #0f0; }
    .fail { color: #f00; }
    pre {
      background: #222;
      padding: 1em;
      border-radius: 8px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <h2>ğŸ§ª Telegram WebApp Debug</h2>

  <ul>
    <li><b>Chat ID:</b> <span id="chat_id" class="fail">âŒ Niet gevonden</span></li>
    <li><b>Telegram ID:</b> <span id="tgid" class="fail">âŒ Niet gevonden</span></li>
    <li><b>Username:</b> <span id="username" class="fail">âŒ Niet gevonden</span></li>
    <li><b>Voornaam:</b> <span id="first_name" class="fail">âŒ Niet gevonden</span></li>
    <li><b>Achternaam:</b> <span id="last_name" class="fail">âŒ Niet gevonden</span></li>
  </ul>

  <pre id="debug"></pre>

  <script>
    window.onload = () => {
      const urlParams = new URLSearchParams(window.location.search);
      const chatId = urlParams.get("chat_id");

      if (chatId) {
        const el = document.getElementById("chat_id");
        el.textContent = chatId;
        el.className = "ok";
      }

      if (typeof Telegram === "undefined" || !Telegram.WebApp) {
        document.getElementById("debug").textContent = "âŒ Telegram WebApp niet beschikbaar.\nOpen dit via een startapp-knop in Telegram.";
        return;
      }

      Telegram.WebApp.ready();
      const data = Telegram.WebApp.initDataUnsafe;

      if (data?.user) {
        const set = (id, value) => {
          const el = document.getElementById(id);
          if (value) {
            el.textContent = value;
            el.className = "ok";
          }
        };

        set("tgid", data.user.id);
        set("username", data.user.username);
        set("first_name", data.user.first_name);
        set("last_name", data.user.last_name);
      }

      document.getElementById("debug").textContent = JSON.stringify(data, null, 2);
    };
  </script>
</body>
</html>
